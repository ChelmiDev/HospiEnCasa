@page "{idPaciente:int}"
@model HospiEnCasa.App.Presentacion.Pages.Historias.IndexModel
@{
  ViewData["Title"] = "Historia";
}

<!-- Start Ppal Sections -->
<div class="d-flex flex-lg-row flex-column mt-5">
  <!-- Start Submenu vertical -->
  <aside class="col-lg-2 pt-5 ps-3 bg-light">
    <div class="container">
      <nav id="nav-second" class="navbar navbar-light bg-light">
        <ul class="nav flex-lg-column">
          <li class="nav-item">
            <a class="nav-link active disabled" aria-current="page" asp-area="" asp-page="/Medicos/Medicos">Listado</a>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" asp-area="" asp-page="/Medicos/NuevoMedico">Registrar</a>
          </li>
        </ul>
      </nav>
    </div>
  </aside>
  <!-- End Submenu vertical -->

  <!-- Start Main section -->
  <main class="container-fluid pt-5">
    <!-- Start Breadcrumb section -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a asp-area="" asp-page="/Index">Home</a></li>
        <li class="breadcrumb-item"><a asp-area="" asp-page="/Pacientes/Pacientes">Pacientes</a></li>
        <li class="breadcrumb-item"><a asp-area="" asp-page="/Pacientes/Paciente"
            asp-route-id="@Model.Paciente.Id">Paciente</a></li>
        <li class="breadcrumb-item active" aria-current="page">
          Historias
        </li>
      </ol>
    </nav>
    <!-- End Breadcrumb section -->
    <!-- Start Content section -->
    <section>
      <!-- Start Title and form Paciente and Historia basic information section -->
      <div class="container-fluid">
        <h1 class="title-section">Historia Clinica</h1>
        <form class="" method="">
          <fieldset class="row g-3 py-3">
            <legend class="">Informacion Paciente</legend>
            <div class="col-lg-3">
              <label asp-for="Paciente.Identificacion" class="form-label">Identificacion</label>
              <input asp-for="Paciente.Identificacion" class="form-control" readonly />
            </div>
            <div class="col-lg-3">
              <label asp-for="Paciente.Nombres" class="form-label">Nombres</label>
              <input asp-for="Paciente.Nombres" class="form-control" readonly />
            </div>
            <div class="col-lg-3">
              <label asp-for="Paciente.Apellidos" class="form-label">Apellidos</label>
              <input asp-for="Paciente.Apellidos" class="form-control" readonly />
            </div>
            <div class="col-lg-3">
              <label asp-for="Paciente.NumeroTelefono" class="form-label">Telefono</label>
              <input asp-for="Paciente.NumeroTelefono" type="tel" class="form-control" readonly />
            </div>
          </fieldset>
          <fieldset class="row g-3 py-3">
            <legend class="">Informacion Historia</legend>
            <div class="col-lg-3">
              <label asp-for="Paciente.Historia.Diagnostico" class="form-label">Diagnostico</label>
              <input asp-for="Paciente.Historia.Diagnostico" class="form-control" readonly />
            </div>
            <div class="col-lg-3">
              <label asp-for="Paciente.Historia.Entorno" class="form-label">Entorno</label>
              <input asp-for="Paciente.Historia.Entorno" class="form-control" readonly />
            </div>
          </fieldset>
        </form>
      </div>
      <!-- End Title and form Paciente and Historia basic information section -->

      <hr>

      <!-- Start Title, new form Sugerencia Cuidado and form search section -->
      <div class="container-fluid pb5">
        <h1 class="title-section pb-3">Listado Sugerencias Cuidado</h1>
        <div class="row pb-3 pt-2">
          <div class="col-lg-7">
            <!-- Start Title and new form Sugerencia Cuidado section -->
            <form class="" method="post">
              <fieldset class="row g-3 py-3">
                <legend>Nueva Sugerencia</legend>
                <div class="row pt-2">
                  <div class="col-lg-3">
                    <label asp-for="NuevaSugerenciaCuidado.FechaHora" class="sr-only">Fecha y Hora
                      Sugerencia</label>
                    <input asp-for="NuevaSugerenciaCuidado.FechaHora" class="form-control">
                    <span asp-validation-for="NuevaSugerenciaCuidado.FechaHora" class="text-danger"></span>
                  </div>
                  <div class="col-lg-7">
                    <label asp-for="NuevaSugerenciaCuidado.Descripcion" class="sr-only">Descripcion
                      Sugerencia</label>
                    <input asp-for="NuevaSugerenciaCuidado.Descripcion" class="form-control"
                      placeholder="Descripcion"></textarea>
                    <span asp-validation-for="NuevaSugerenciaCuidado.Descripcion" class="text-danger"></span>
                  </div>
                  <div class="col-lg-2">
                    <button type="submit" class="btn btn-primary">Registrar</button>
                  </div>
                </div>
              </fieldset>
            </form>
            <!-- End Title and new form Sugerencia Cuidado section -->

          </div>
          <div class="col-lg-5">
            <!-- Start form search Sugerencia Cuidado section -->
            <form class="">
              <fieldset class="row g-3 py-3">
                <legend>Filtro Sugerencias</legend>
                <div class="row pt-2">
                  <div class="col-lg-4">
                    <label class="sr-only" for="specificCriteriaType">Criterio</label>
                    <select class="form-select" id="specificCriteriaType">
                      <option selected>Choose...</option>
                      <option value="1">One</option>
                      <option value="2">Two</option>
                      <option value="3">Three</option>
                    </select>
                  </div>
                  <div class="col-lg-5">
                    <label class="sr-only" for="specificCriteria">Name</label>
                    <input type="text" class="form-control" id="specificCriteria" placeholder="Por nombre?" />
                  </div>
                  <div class="col-lg-2">
                    <button type="submit" class="btn btn-primary">Buscar</button>
                  </div>
                </div>
              </fieldset>
            </form>
            <!-- End Title and form search Sugerencia Cuidado section -->
          </div>
        </div>
      </div>


      <!-- End Title new form Sugerencia Cuidado and form search section -->

      <hr>

      <!-- Start Table section -->
      <table class="table table-striped table-hover align-middle caption-top text-center">
        <thead>
          <th>No.</th>
          <th>Fecha Sugerencia</th>
          <th>Descripcion</th>
          <th>Accion</th>
        </thead>
        <tbody>
          @if (Model.Paciente.Historia.Sugerencias == null)
          {
            <tr>
              <td colspan="4" class="table-active">
                <span><strong>No se encontraron Sugerencias de Cuidado en el sistema</strong></span>
              </td>
            </tr>
          }
          else
          {
            int consecutivoSugerencia = 0;
            @foreach (var sugerencia in Model.Paciente.Historia.Sugerencias)
            {
              consecutivoSugerencia++;
              <tr>
                <td>@consecutivoSugerencia</td>
                <td>@sugerencia.FechaHora</td>
                <td>@sugerencia.Descripcion</td>
                <td>
                  <a href="#">
                    <i class="fa-solid fa-pen-to-square icon-edit mx-1" title="Editar"></i>
                  </a>
                </td>
              </tr>
            }
          }
        </tbody>
      </table>
      <!-- End Table section -->
      <!-- Start Pagination table section -->
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <li class="page-item">
            <a class="page-link">Previous</a>
          </li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
      </nav>
      <!-- End Pagination table section -->
    </section>
    <!-- Start Content section -->
  </main>
  <!-- End Main section -->
</div>
<!-- End Ppal Sections -->

<!-- Start Modal-->
@if (@Model.IsCreateSugerencia)
{
  <partial name="_ModalView" for="ModalInfo" />
  @section ScriptModal{
<partial name="_ModalViewScript" />
}
}
<!-- End Modal-->
